/*
Title: Callback / Enquiry Response
Sort: 4
*/


Below is data response structure from Recurring Callback or Enquiry.
<br />
System will response the Callback / Enquiry to Merchant's via server-to-server approach, by using HTTP Post Method.
<br />
<br />
_*Callback URL will need to kept in Payment System, system will using this URL to send the callback notification to merchant's server when the transaction status being completed._

<br />

## Response

| Field Name                           | Data Type (Len) | M/O/C | Description                                                                                                              |
|--------------------------------------|-----------------|-------|--------------------------------------------------------------------------------------------------------------------------|
| RecurringStatus                      | Integer         | M     | Recurring Status.<br />(Refer to Appedix 4 - Recurring Status)                                                           |
| RecurringMessage                     | String (500)    | C     | Recurring Message. Response with recurring terminated details.                                                           |
| MerchantID                           | String (50)     | M     | Unique merchant's identification assigned to each merchant by SC Payments.                                            |
| MerchantOrderNo                      | String (50)     | M     | Unique identifier or order number generated by merchant, use it to track Recurring and subsequent cycle payment details. |
| RecurringAmount                      | Decimal (18,2)  | M     | Recurring amount.                                                                                                        |
| NextPaymentDate                      | String          | C     | Recurring next occurrence date. Available if recurring still on-going.<br />  *Format in yyyy-MM-dd                      |
| MaskedPAN                            | String (20)     | M     | Masked Card Number if payment via Credit/Debit Card.                                                                     |
| PaymentTransactionList               | Array Object    |       | Contains executed cycle payment details.                                                                                 |
| PaymentTransactionList.RecurringDate | String (15)     | M     | Recurring cycle date.<br />  *Format in yyyy-MM-dd                                                                       |
| PaymentTransactionList.TxnStatus     | Integer         | M     | Transaction status referring on current cycle payment.<br /> (Refer to Appendix 5 - Transaction Status)                  |
| PaymentTransactionList.TxnRefNo      | String (50)     | C     | Unique identifier generated by payment system, to identify the transaction status.                                       |
| PaymentTransactionList.Cycle         | Integer         | M     | Indicator of current cycle payment.                                                                                      |

<br/>

| HTTP Header | Data Type   (Len) | M/O | Description                                                     |
|-------------|-------------------|-----|-----------------------------------------------------------------|
| SCSign      |                   | M   | Message sign (Refer to below <b>SCSign Calculation<b/> section) |

****Note, field SCSign will be exists in HTTP Header.***

<br />
<br />


> **Response Sample**
    
	{
		"RecurringStatus": 1,
		"RecurringMessage": "Success",
		"MerchantID": "MID0001",
		"MerchantOrderNo": "RecurringPayment_001",
		"RecurringAmount": 15.00,
		"NextPaymentDate": "2023-04-26",
		"MaskedPAN": "545301XXXXXX1234",
		"PaymentTransactionList": [{
			"RecurringDate": "2023-02-26",
			"TxnStatus": 1,
			"TxnRefNo": "ABCD1111",
			"Cycle": 1
		},{
			"RecurringDate": "2023-03-26",
			"TxnStatus": 1,
			"TxnRefNo": "ABCD2222",
			"Cycle": 2
		}]
	}

<br />
<hr />


## <u>SCSign Calculation</u>

SCSign signature calculation, will sign with whole json string, and calculate with HMACSHA256 algorithm.
<br/>
<br />
**Secret Key** : mSuE3Ttn5B8vJhe5ncMutMLV

<br />

<u>**Response Sign String (Example)**</u> 
<p style="word-wrap: break-word;">
{"RecurringStatus":1,"RecurringMessage":"Success","MerchantID":"MID0001","MerchantOrderNo":"RecurringPayment_001","RecurringAmount":15,"NextPaymentDate":"2023-04-26","MaskedPAN":"545301XXXXXX1234","PaymentTransactionList":[{"RecurringDate":"2023-02-26","TxnStatus":1,"TxnRefNo":"ABCD1111","Cycle":1},{"RecurringDate":"2023-03-26","TxnStatus":1,"TxnRefNo":"ABCD2222","Cycle":2}]}
</p>

<br />

<u>**SCSign (Calculated Value)**</u> 
<p style="word-wrap: break-word;">
8828efaa7921e2f08c624f05d07470b8c6b5be641add9774b85f5b21452e9e31
</p>

<br />